<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine Letter</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&family=Great+Vibes&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;}

body{
  height:100svh;
  background: linear-gradient(135deg, #3a0f1f, #7a1f3d, #b23a5f);
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:'Playfair Display', serif;
  overflow:hidden;
}

/* Floating hearts */
.heart{
  position: fixed;
  bottom:-10px;
  color: rgba(255,255,255,0.8);
  pointer-events:none;
  animation: floatUp linear infinite;
  z-index:0;
}
@keyframes floatUp{
  to{transform: translateY(-120vh) scale(1.2);opacity:0;}
}

/* Envelope */
.envelope{
  width:85vw; max-width:360px;
  aspect-ratio:16/10;
  position:relative;
  background:#fff0f5;
  border-radius:10px;
  cursor:pointer;
  transform-style: preserve-3d;
  transition: all 0.9s cubic-bezier(.4,0,.2,1);
  box-shadow:0 25px 50px rgba(0,0,0,0.45);
  z-index:2;
}
.envelope.open{transform: scale(1.05);}
.envelope.writing{transform: scale(0.8) translateY(60px);opacity:0.4;}

.flap{
  position:absolute; inset:0;
  background:#ffd6e3;
  clip-path: polygon(0 0, 100% 0, 50% 55%);
  transform-origin: top;
  transition: transform 0.8s cubic-bezier(.4,0,.2,1);
  z-index:2;
}
.envelope.open .flap{transform: rotateX(-160deg);}

/* Paper */
.paper{
  position:absolute;
  top:50%; left:50%;
  width:340px; height:500px;
  background:#fff8e7;
  padding:40px;
  box-shadow:0 30px 60px rgba(0,0,0,0.5);
  display:none;
  z-index:3;
  border:2px solid #f3d1dc;
  border-radius:12px;
  transform: translate(-50%,-50%);
  transition: transform 0.8s ease, opacity 0.8s ease;
  overflow:hidden;
  background-image: linear-gradient(0deg, rgba(255,220,230,0.1) 1px, transparent 1px);
  background-size: 1em 1em;
}

.paper.out{transform: translate(-50%,-60%) scale(1.05);}

/* Paper content */
.paper-content{
  width:100%; height:100%; overflow-y:auto;
}

.writing-text{
  font-family:'Great Vibes', cursive;
  font-size:1.1rem;
  line-height:1.7;
  white-space: pre-wrap;
}

.love-line{
  opacity:0;
  text-align:center;
  font-size:1.1rem;
  margin-top:18px;
  transition: opacity 2s ease, transform 2s ease;
  transform: scale(0.95);
}

/* Close button */
.close{
  position:absolute;
  bottom:10px;
  right:12px;
  background: rgba(0,0,0,0.05);
  border:none;
  border-radius:50%;
  width:36px; height:36px;
  font-size:18px;
  cursor:pointer;
}

/* Pen */
.pen{
  position:fixed;
  left:40px; bottom:60px;
  width:60px;
  cursor:pointer;
  z-index:4;
}

/* Fade-in dialogue */
.dialogue{
  position:absolute;
  bottom:10px;
  width:100%;
  text-align:center;
  color:#333;
  font-weight:600;
  font-size:1rem;
  opacity:0;
  transition: opacity 0.6s ease;
}

</style>
</head>
<body>

<audio id="bgMusic" loop>
  <source src="love-music.mp3" type="audio/mpeg">
</audio>

<div class="envelope" id="envelope">
  <div class="flap"></div>
  <div class="paper" id="paper">
    <button class="close" id="closeBtn">Ã—</button>
    <div class="paper-content">
      <div class="writing-text" id="letterText"></div>
      <div class="love-line" id="finalLine">Forever my Valentine ðŸ’˜</div>
    </div>
    <div class="dialogue" id="dialogue">Oh noâ€¦ I forgot to write in it!</div>
  </div>
</div>

<!-- Fountain Pen Image -->
<img src="fountain-pen.png" class="pen" id="pen">

<script>
const envelope=document.getElementById('envelope');
const paper=document.getElementById('paper');
const dialogue=document.getElementById('dialogue');
const pen=document.getElementById('pen');
const letterText=document.getElementById('letterText');
const finalLine=document.getElementById('finalLine');
const music=document.getElementById('bgMusic');
const closeBtn=document.getElementById('closeBtn');

const text=`My love,

Loving you feels like discovering home in a person.
With you, I donâ€™t have to rush, pretend, or hide â€”
I simply exist, and that feels like peace.

You are my favorite thought at random hours,
the reason my smile appears without warning.

This Valentineâ€™s Day isnâ€™t about grand gestures.
Itâ€™s about choosing you â€” in laughter, in silence,
and in everything in between.

If I could give you one thing,
it would be the ability to see yourself through my eyes â€”
because then youâ€™d know just how deeply loved you are.`;

/* Open envelope -> show paper & fade-in dialogue */
envelope.addEventListener('click',()=>{
  if(!envelope.classList.contains('open')){
    envelope.classList.add('open');
    paper.style.display='block';
    dialogue.style.opacity="1";
  }
});

/* Click pen -> slide paper out + fade out dialogue + typing + music */
pen.addEventListener('click',()=>{
  dialogue.style.opacity="0";
  paper.classList.add('out');
  fadeInMusic();
  startWriting();
});

/* Typing effect */
function startWriting(){
  let i=0;
  function type(){
    if(i<text.length){
      letterText.textContent+=text.charAt(i);
      letterText.parentElement.scrollTop = letterText.parentElement.scrollHeight;
      i++;
      setTimeout(type,35);
    } else { finalLine.style.opacity="1"; }
  }
  type();
}

/* Music fade-in */
function fadeInMusic(){
  music.volume=0;
  music.play().catch(()=>{});
  let vol=0;
  const fade=setInterval(()=>{
    if(vol<0.35){vol+=0.02; music.volume=vol;}
    else clearInterval(fade);
  },120);
}

/* Close paper & envelope */
closeBtn.addEventListener('click',()=>{
  paper.classList.remove('out');
  paper.style.display='none';
  envelope.classList.remove('open');
  dialogue.style.opacity="0";
  letterText.textContent="";
  finalLine.style.opacity="0";
  music.pause();
  music.currentTime=0;
});

/* Floating hearts */
for(let i=0;i<30;i++){
  const heart=document.createElement("div");
  heart.className="heart";
  heart.innerHTML="â¤";
  heart.style.left=Math.random()*100+"vw";
  heart.style.animationDuration=(6+Math.random()*6)+"s";
  heart.style.opacity=Math.random();
  heart.style.fontSize=(12+Math.random()*14)+"px";
  document.body.appendChild(heart);
}
</script>
</body>
</html>
