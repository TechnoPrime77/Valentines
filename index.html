<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Forgotten Letter</title>

<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}

body{
  height:100vh;
  background:#1a1412;
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
  font-family:'Playfair Display',serif;
}

/* Candle Glow Background */
body::before{
  content:"";
  position:absolute;
  width:600px;
  height:600px;
  background:radial-gradient(circle, rgba(255,180,80,0.35) 0%, transparent 70%);
  animation:flicker 3s infinite alternate ease-in-out;
}

@keyframes flicker{
  0%{opacity:0.8;transform:scale(1);}
  50%{opacity:0.6;transform:scale(1.05);}
  100%{opacity:0.9;transform:scale(0.98);}
}

/* Envelope */
.envelope{
  width:320px;
  height:200px;
  background:#f0f0f0;
  position:relative;
  border-radius:8px;
  cursor:pointer;
  box-shadow:0 20px 40px rgba(0,0,0,0.6);
  transition:transform 0.8s ease;
  z-index:2;
}

.flap{
  position:absolute;
  width:100%;
  height:100%;
  background:#e0e0e0;
  clip-path:polygon(0 0,100% 0,50% 60%);
  transform-origin:top;
  transition:transform 0.8s ease;
}

.envelope.open .flap{
  transform:rotateX(-160deg);
}

/* Hidden Pen */
.hidden-pen{
  position:absolute;
  width:50px;
  right:-25px;
  bottom:-25px;
  opacity:0;
  cursor:pointer;
  transition:opacity 1s ease;
}

.envelope.open + .hidden-pen{
  opacity:1;
}

/* Paper */
.paper{
  position:absolute;
  width:360px;
  height:460px;
  background:#d8c7a1;
  border-radius:6px;
  padding:50px 40px;
  display:none;
  box-shadow:0 20px 40px rgba(0,0,0,0.7);
  background-image:radial-gradient(rgba(0,0,0,0.04) 1px, transparent 1px);
  background-size:4px 4px;
  z-index:1;
}

.dialogue{
  text-align:center;
  margin-top:120px;
  font-size:18px;
  opacity:0;
  transition:opacity 1s ease;
}

.letter-text{
  font-family:'Great Vibes',cursive;
  font-size:28px;
  line-height:1.5;
  white-space:pre-wrap;
}

.final-line{
  opacity:0;
  text-align:center;
  margin-top:25px;
  font-size:34px;
  font-family:'Great Vibes',cursive;
  transition:opacity 2s ease;
}

/* Writing Pen Animation */
.writing-pen{
  position:absolute;
  width:40px;
  display:none;
  pointer-events:none;
}
</style>
</head>
<body>

<div class="envelope" id="envelope">
  <div class="flap"></div>
</div>

<img src="https://cdn-icons-png.flaticon.com/512/3103/3103446.png" class="hidden-pen" id="pen">

<div class="paper" id="paper">
  <div class="dialogue" id="dialogue">
    Oh no... I forgot to write in it.
    <br><br>
    Maybe there's a pen somewhere...
  </div>
  <div class="letter-text" id="letter"></div>
  <div class="final-line" id="finalLine">I love you.</div>
</div>

<img src="https://cdn-icons-png.flaticon.com/512/3103/3103446.png" class="writing-pen" id="writingPen">

<audio id="music" src="love.mp3"></audio>

<script>
const envelope=document.getElementById("envelope");
const paper=document.getElementById("paper");
const dialogue=document.getElementById("dialogue");
const pen=document.getElementById("pen");
const writingPen=document.getElementById("writingPen");
const letter=document.getElementById("letter");
const music=document.getElementById("music");
const finalLine=document.getElementById("finalLine");

const text=`My love,

I thought I had prepared something perfect for you.
But maybe perfection isn’t written beforehand —
maybe it’s created in the moment.

You are the warmth in my winters,
the calm in my chaos,
the softest part of my every day.

If this letter seems unfinished,
it’s because my love for you is still being written.
Every heartbeat adds another word.
Every memory adds another line.

And today,
on Valentine’s Day,
I just want you to know —

you are my always.`;

envelope.addEventListener("click",()=>{
  envelope.classList.add("open");
  setTimeout(()=>{
    paper.style.display="block";
    setTimeout(()=>dialogue.style.opacity="1",500);
  },800);
});

pen.addEventListener("click",()=>{
  dialogue.style.opacity="0";
  setTimeout(()=>{
    startWriting();
  },800);
});

function startWriting(){
  music.play();
  writingPen.style.display="block";
  let i=0;

  function type(){
    if(i<text.length){
      letter.textContent+=text.charAt(i);

      // Move pen position
      writingPen.style.left = (paper.offsetLeft + 60 + (i%30)*6) + "px";
      writingPen.style.top = (paper.offsetTop + 80 + Math.floor(i/30)*28) + "px";

      i++;
      setTimeout(type,40);
    } else {
      writingPen.style.display="none";
      setTimeout(()=>{
        finalLine.style.opacity="1";
      },1000);
    }
  }
  type();
}
</script>

</body>
</html>
