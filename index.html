<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For Ria ❤️</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display&family=Great+Vibes&display=swap" rel="stylesheet">

<style>
body {
  margin: 0;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  background: linear-gradient(135deg, #ff9a9e, #fad0c4);
  font-family: 'Playfair Display', serif;
  overflow: hidden;
}

.letter {
  width: 90%;
  max-width: 400px;
  height: 65vh;
  background: #fffaf0;
  border-radius: 12px;
  box-shadow: 0 10px 40px rgba(0,0,0,0.2);
  padding: 25px;
  box-sizing: border-box;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  position: relative;
}

.text {
  font-size: 1.2rem;
  line-height: 1.6;
  white-space: pre-line;
}

.link {
  color: #e63946;
  text-decoration: underline;
  cursor: pointer;
  font-weight: bold;
}

.tap-hint {
  position: absolute;
  bottom: 15px;
  font-size: 0.8rem;
  opacity: 0.6;
}
</style>
</head>

<body>

<div class="letter" onclick="startExperience()">
  <div class="text" id="text"></div>
  <div class="tap-hint">Tap to begin</div>
</div>

<audio id="bgMusic" loop>
  <!-- Replace this with your own hosted mp3 -->
  <source src="love-music.mp3" type="audio/mpeg">
</audio>

<script>
const envelope = document.getElementById('envelope');
const music = document.getElementById('bgMusic');
const musicBtn = document.getElementById('musicBtn');
const typingLine = document.getElementById('typingLine');
const secretLink = document.getElementById('secretLink');

let typingStarted = false;

const firstMessage = `Heyy Ria
prbly ur like not this againn...i didnt get much time to do it so ur stuck with this ig`;

const secondMessage = "Just kiddingg... Click here";

let index = 0;

/* Open letter */
envelope.addEventListener('click', () => {
  if (!envelope.classList.contains('open')) {
    envelope.classList.add('open');

    music.volume = 0.4;
    music.play().catch(() => {});
    musicBtn.textContent = '⏸ Music';

    if (!typingStarted) {
      typingStarted = true;
      typeFirst();
    }
  }
});

/* Type first message */
function typeFirst() {
  if (index < firstMessage.length) {
    typingLine.textContent += firstMessage.charAt(index);
    index++;
    setTimeout(typeFirst, 70);
  } else {
    setTimeout(deleteText, 2000);
  }
}

/* Backspace first message */
function deleteText() {
  if (typingLine.textContent.length > 0) {
    typingLine.textContent =
      typingLine.textContent.slice(0, -1);
    setTimeout(deleteText, 40);
  } else {
    setTimeout(typeSecond, 500);
  }
}

/* Type second message */
function typeSecond() {
  let i = 0;

  function typing() {
    if (i < secondMessage.length) {
      typingLine.textContent += secondMessage.charAt(i);
      i++;
      setTimeout(typing, 70);
    } else {
      showLink();
    }
  }

  typing();
}

/* Show link */
function showLink() {
  secretLink.innerHTML =
    '<a href="http://chess.com/" target="_blank">Click here</a>';
  secretLink.classList.add('show');
}

/* Close */
function closeLetter(e) {
  e.stopPropagation();
  envelope.classList.remove('open');
  music.pause();
  music.currentTime = 0;
  musicBtn.textContent = '▶ Music';

  // Reset everything when closed
  typingLine.textContent = "";
  secretLink.classList.remove('show');
  typingStarted = false;
  index = 0;
}

/* Manual music toggle */
function toggleMusic() {
  if (music.paused) {
    music.play();
    musicBtn.textContent = '⏸ Music';
  } else {
    music.pause();
    musicBtn.textContent = '▶ Music';
  }
}

/* Floating hearts */
for (let i = 0; i < 30; i++) {
  const heart = document.createElement("div");
  heart.className = "heart";
  heart.innerHTML = "❤";
  heart.style.left = Math.random() * 100 + "vw";
  heart.style.animationDuration = (6 + Math.random() * 6) + "s";
  heart.style.opacity = Math.random();
  heart.style.fontSize = (12 + Math.random() * 14) + "px";
  document.body.appendChild(heart);
}
</script>

</body>
</html>
