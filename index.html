<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Forgotten Letter</title>

<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}

body{
  height:100vh;
  background:linear-gradient(135deg,#1a1412,#2b1d2f,#3a1f2d);
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:'Playfair Display',serif;
  overflow:hidden;
}

/* Scene container */
.scene{
  position:relative;
  width:380px;
  height:600px;
  display:flex;
  justify-content:center;
  align-items:center;
}

/* Envelope */
.envelope{
  position:absolute;
  width:320px;
  height:200px;
  background:#f0f0f0;
  border-radius:8px;
  box-shadow:0 20px 40px rgba(0,0,0,0.6);
  cursor:pointer;
  transition:all 0.8s ease;
  z-index:3;
}

.flap{
  position:absolute;
  width:100%;
  height:100%;
  background:#e0e0e0;
  clip-path:polygon(0 0,100% 0,50% 60%);
  transform-origin:top;
  transition:transform 0.8s ease;
}

.envelope.open .flap{
  transform:rotateX(-170deg);
}

.close-btn{
  position:absolute;
  top:8px;
  right:10px;
  font-size:18px;
  cursor:pointer;
  display:none;
}

/* Vase */
.vase{
  position:absolute;
  bottom:20px;
  left:20px;
  width:60px;
  height:80px;
  background:#8b5a2b;
  border-radius:30px 30px 10px 10px;
  cursor:pointer;
  display:none;
  z-index:4;
}

.vase::before{
  content:"ðŸŒ¹";
  position:absolute;
  top:-35px;
  left:12px;
  font-size:40px;
}

/* Paper (A4 style) */
.paper{
  position:absolute;
  width:340px;
  height:500px;
  background:#f4e4c1;
  box-shadow:0 25px 50px rgba(0,0,0,0.7);
  padding:40px;
  display:none;
  overflow:hidden;
  z-index:2;
}

/* Scrollable content */
.paper-content{
  width:100%;
  height:100%;
  overflow-y:auto;
}

.dialogue{
  text-align:center;
  margin-top:150px;
  font-size:18px;
  opacity:0;
  transition:opacity 1s ease;
}

.letter-text{
  font-family:'Great Vibes',cursive;
  font-size:26px;
  line-height:1.6;
  white-space:pre-wrap;
}

.final-line{
  opacity:0;
  text-align:center;
  margin-top:25px;
  font-size:32px;
  font-family:'Great Vibes',cursive;
  transition:opacity 2s ease;
}

/* Writing pen */
.writing-pen{
  position:absolute;
  width:35px;
  display:none;
  z-index:5;
}
</style>
</head>
<body>

<div class="scene">

  <div class="envelope" id="envelope">
    <div class="flap"></div>
    <div class="close-btn" id="closeBtn">âœ•</div>
  </div>

  <div class="paper" id="paper">
    <div class="paper-content">
      <div class="dialogue" id="dialogue">
        Oh no... I forgot to write in it.
        <br><br>
        Maybe there's a pen somewhere...
      </div>
      <div class="letter-text" id="letter"></div>
      <div class="final-line" id="finalLine">I love you.</div>
    </div>
  </div>

  <div class="vase" id="vase"></div>

  <img src="https://cdn-icons-png.flaticon.com/512/1380/1380338.png"
       class="writing-pen"
       id="writingPen">

</div>

<audio id="music" src="love.mp3"></audio>

<script>
const envelope=document.getElementById("envelope");
const closeBtn=document.getElementById("closeBtn");
const paper=document.getElementById("paper");
const dialogue=document.getElementById("dialogue");
const vase=document.getElementById("vase");
const writingPen=document.getElementById("writingPen");
const letter=document.getElementById("letter");
const music=document.getElementById("music");
const finalLine=document.getElementById("finalLine");

const text=`My love,

I thought I had prepared something perfect for you.
But maybe perfection isn't written beforehand â€”
maybe it's created in the moment.

You are the warmth in my winters,
the calm in my chaos,
the softest part of my every day.

If this letter seems unfinished,
it's because my love for you is still being written.
Every heartbeat adds another word.
Every memory adds another line.

And today,
on Valentine's Day,
I just want you to know â€”

you are my always.`;

/* Open Envelope */
envelope.addEventListener("click",()=>{
  if(!envelope.classList.contains("open")){
    envelope.classList.add("open");
    closeBtn.style.display="block";
    setTimeout(()=>{
      paper.style.display="block";
      vase.style.display="block";
      setTimeout(()=>dialogue.style.opacity="1",500);
    },800);
  }
});

/* Close Envelope */
closeBtn.addEventListener("click",(e)=>{
  e.stopPropagation();
  envelope.classList.remove("open");
  closeBtn.style.display="none";
  paper.style.display="none";
  vase.style.display="none";
  dialogue.style.opacity="0";
  letter.textContent="";
  finalLine.style.opacity="0";
});

/* Vase click = spawn pen + start writing */
vase.addEventListener("click",()=>{
  vase.style.display="none";
  dialogue.style.opacity="0";
  writingPen.style.display="block";
  music.play();
  startWriting();
});

function startWriting(){
  let i=0;
  function type(){
    if(i<text.length){
      letter.textContent+=text.charAt(i);

      // auto scroll inside paper
      const content=document.querySelector(".paper-content");
      content.scrollTop=content.scrollHeight;

      i++;
      setTimeout(type,35);
    }else{
      writingPen.style.display="none";
      finalLine.style.opacity="1";
    }
  }
  type();
}
</script>

</body>
</html>
