<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Forgotten Letter</title>

<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}

body{
  height:100vh;
  background:#140f0d;
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
  font-family:'Playfair Display',serif;
  position:relative;
}

/* Candle Flicker Glow */
body::before{
  content:"";
  position:absolute;
  width:800px;
  height:800px;
  background:radial-gradient(circle, rgba(255,170,80,0.25) 0%, transparent 70%);
  animation:flicker 2.5s infinite alternate ease-in-out;
}

@keyframes flicker{
  0%{opacity:0.7;transform:scale(1);}
  50%{opacity:0.5;transform:scale(1.05);}
  100%{opacity:0.8;transform:scale(0.98);}
}

/* Container */
.scene{
  position:relative;
  width:360px;
  height:480px;
  display:flex;
  justify-content:center;
  align-items:center;
}

/* Envelope */
.envelope{
  position:absolute;
  width:320px;
  height:200px;
  background:#ececec;
  border-radius:10px;
  box-shadow:0 20px 40px rgba(0,0,0,0.7);
  cursor:pointer;
  transition:transform 0.8s ease;
  z-index:3;
}

.flap{
  position:absolute;
  width:100%;
  height:100%;
  background:#dcdcdc;
  clip-path:polygon(0 0,100% 0,50% 65%);
  transform-origin:top;
  transition:transform 0.8s ease;
}

.envelope.open .flap{
  transform:rotateX(-170deg);
}

/* Hidden Pen */
.hidden-pen{
  position:absolute;
  width:45px;
  right:-15px;
  bottom:-15px;
  opacity:0;
  cursor:pointer;
  transition:opacity 1s ease;
  z-index:4;
}

.envelope.open + .hidden-pen{
  opacity:1;
}

/* Paper */
.paper{
  position:absolute;
  width:340px;
  height:440px;
  background:#d6c3a1;
  padding:50px 40px;
  display:none;
  box-shadow:0 25px 50px rgba(0,0,0,0.8);
  z-index:2;
  overflow:hidden;

  /* Crumpled texture */
  background-image:
    radial-gradient(rgba(0,0,0,0.05) 1px, transparent 1px),
    linear-gradient(135deg, rgba(255,255,255,0.08), transparent);
  background-size:4px 4px, cover;

  /* Torn edge effect */
  clip-path: polygon(
    2% 0%, 98% 2%, 100% 96%, 96% 100%,
    4% 98%, 0% 94%, 1% 4%
  );
}

/* Burned edge shading */
.paper::before{
  content:"";
  position:absolute;
  inset:0;
  box-shadow:inset 0 0 40px rgba(0,0,0,0.25);
  pointer-events:none;
}

/* Dialogue */
.dialogue{
  text-align:center;
  margin-top:130px;
  font-size:18px;
  opacity:0;
  transition:opacity 1s ease;
}

/* Letter text */
.letter-text{
  font-family:'Great Vibes',cursive;
  font-size:28px;
  line-height:1.5;
  white-space:pre-wrap;
}

.final-line{
  opacity:0;
  text-align:center;
  margin-top:25px;
  font-size:34px;
  font-family:'Great Vibes',cursive;
  transition:opacity 2s ease;
}
</style>
</head>
<body>

<div class="scene">

  <div class="envelope" id="envelope">
    <div class="flap"></div>
  </div>

  <img src="https://cdn-icons-png.flaticon.com/512/3103/3103446.png"
       class="hidden-pen"
       id="pen">

  <div class="paper" id="paper">
    <div class="dialogue" id="dialogue">
      Oh no... I forgot to write in it.
      <br><br>
      Maybe there's a pen somewhere...
    </div>
    <div class="letter-text" id="letter"></div>
    <div class="final-line" id="finalLine">I love you.</div>
  </div>

</div>

<audio id="music" src="love.mp3"></audio>

<script>
const envelope=document.getElementById("envelope");
const paper=document.getElementById("paper");
const dialogue=document.getElementById("dialogue");
const pen=document.getElementById("pen");
const letter=document.getElementById("letter");
const music=document.getElementById("music");
const finalLine=document.getElementById("finalLine");

const text=`My love,

I thought I had prepared something perfect for you.
But maybe perfection isn’t written beforehand —
maybe it’s created in the moment.

You are the warmth in my winters,
the calm in my chaos,
the softest part of my every day.

If this letter seems unfinished,
it's because my love for you is still being written.
Every heartbeat adds another word.
Every memory adds another line.

And today,
on Valentine's Day,
I just want you to know —

you are my always.`;

envelope.addEventListener("click",()=>{
  envelope.classList.add("open");
  setTimeout(()=>{
    paper.style.display="block";
    paper.style.zIndex="5";
    envelope.style.zIndex="1";
    setTimeout(()=>dialogue.style.opacity="1",500);
  },800);
});

pen.addEventListener("click",()=>{
  dialogue.style.opacity="0";
  setTimeout(()=>startWriting(),800);
});

function startWriting(){
  music.play();
  let i=0;
  function type(){
    if(i<text.length){
      letter.textContent+=text.charAt(i);
      i++;
      setTimeout(type,35);
    } else {
      setTimeout(()=>finalLine.style.opacity="1",1000);
    }
  }
  type();
}
</script>

</body>
</html>
