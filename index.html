<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Forgotten Letter</title>

<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}

body{
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
  font-family:'Playfair Display',serif;
  background:linear-gradient(135deg,#ff9a9e,#fecfef,#fcb69f);
  position:relative;
}

/* Floating Hearts */
body::before{
  content:"ðŸ’— ðŸ’• ðŸ’– ðŸ’˜ ðŸ’“";
  position:absolute;
  font-size:40px;
  animation:floatHearts 20s linear infinite;
  opacity:0.2;
}

@keyframes floatHearts{
  0%{transform:translateY(100vh)}
  100%{transform:translateY(-100vh)}
}

.scene{
  position:relative;
  width:900px;
  height:600px;
  display:flex;
  justify-content:center;
  align-items:center;
}

/* Envelope */
.envelope{
  position:absolute;
  width:320px;
  height:200px;
  background:#fff;
  border-radius:10px;
  box-shadow:0 20px 40px rgba(0,0,0,0.4);
  cursor:pointer;
  transition:all 0.8s ease;
  z-index:3;
}

.flap{
  position:absolute;
  width:100%;
  height:100%;
  background:#f0f0f0;
  clip-path:polygon(0 0,100% 0,50% 60%);
  transform-origin:top;
  transition:transform 0.8s ease;
}

.envelope.open .flap{
  transform:rotateX(-170deg);
}

.envelope.writing{
  transform:scale(0.8) translateY(80px);
  opacity:0.4;
  z-index:1;
}

/* Paper */
.paper{
  position:absolute;
  width:420px;
  height:520px;
  background:#fff8e7;
  padding:50px;
  box-shadow:0 30px 60px rgba(0,0,0,0.5);
  display:none;
  z-index:5;
  border:2px solid #f3d1dc;
}

.paper::before{
  content:"";
  position:absolute;
  inset:10px;
  border:2px dashed #f3b6c4;
  pointer-events:none;
}

.paper-content{
  width:100%;
  height:100%;
  overflow-y:auto;
}

/* Close button */
.close-btn{
  position:absolute;
  top:15px;
  right:20px;
  font-size:20px;
  cursor:pointer;
  z-index:6;
}

/* Dialogue */
.dialogue{
  text-align:center;
  margin-top:180px;
  font-size:18px;
  opacity:0;
  transition:opacity 1s ease;
}

/* Letter */
.letter-text{
  font-family:'Great Vibes',cursive;
  font-size:28px;
  line-height:1.6;
  white-space:pre-wrap;
}

.final-line{
  opacity:0;
  text-align:center;
  margin-top:30px;
  font-size:34px;
  font-family:'Great Vibes',cursive;
  transition:opacity 2s ease;
}

/* Fountain Pen */
.fountain-pen{
  position:absolute;
  left:80px;
  bottom:80px;
  width:120px;
  cursor:pointer;
  transition:transform 0.3s ease;
  z-index:4;
}

.fountain-pen:hover{
  transform:scale(1.1);
}

</style>
</head>
<body>

<div class="scene">

  <div class="envelope" id="envelope">
    <div class="flap"></div>
  </div>

  <div class="paper" id="paper">
    <div class="close-btn" id="closeBtn">âœ•</div>
    <div class="paper-content">
      <div class="dialogue" id="dialogue">
        Oh no... I forgot to write in it.
        <br><br>
        Maybe I should find my pen...
      </div>
      <div class="letter-text" id="letter"></div>
      <div class="final-line" id="finalLine">I love you.</div>
    </div>
  </div>

  <!-- Fountain Pen Image -->
  <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/4f/Fountain_pen_nib_icon.svg/512px-Fountain_pen_nib_icon.svg.png"
       class="fountain-pen"
       id="pen">

</div>

<audio id="music" src="love.mp3"></audio>

<script>
const envelope=document.getElementById("envelope");
const paper=document.getElementById("paper");
const dialogue=document.getElementById("dialogue");
const pen=document.getElementById("pen");
const letter=document.getElementById("letter");
const music=document.getElementById("music");
const finalLine=document.getElementById("finalLine");
const closeBtn=document.getElementById("closeBtn");

const text=`My love,

I thought I had prepared something perfect for you.
But maybe perfection isn't written beforehand â€”
maybe it's created in the moment.

You are the warmth in my winters,
the calm in my chaos,
the softest part of my every day.

If this letter seems unfinished,
it's because my love for you is still being written.
Every heartbeat adds another word.
Every memory adds another line.

And today,
on Valentine's Day,
I just want you to know â€”

you are my always.`;

/* Open envelope */
envelope.addEventListener("click",()=>{
  if(!envelope.classList.contains("open")){
    envelope.classList.add("open");
    setTimeout(()=>{
      paper.style.display="block";
      setTimeout(()=>dialogue.style.opacity="1",500);
    },800);
  }
});

/* Start writing */
pen.addEventListener("click",()=>{
  if(paper.style.display==="block"){
    dialogue.style.opacity="0";
    envelope.classList.add("writing");
    music.play();
    startWriting();
  }
});

function startWriting(){
  let i=0;
  function type(){
    if(i<text.length){
      letter.textContent+=text.charAt(i);
      const content=document.querySelector(".paper-content");
      content.scrollTop=content.scrollHeight;
      i++;
      setTimeout(type,35);
    }else{
      finalLine.style.opacity="1";
    }
  }
  type();
}

/* Close everything */
closeBtn.addEventListener("click",()=>{
  envelope.classList.remove("open","writing");
  paper.style.display="none";
  dialogue.style.opacity="0";
  letter.textContent="";
  finalLine.style.opacity="0";
  music.pause();
  music.currentTime=0;
});
</script>

</body>
</html>
